#!/usr/bin/env python3
"""
Extract the 4 corner coordinates of the Day 15 and Day 18 intersection area
"""

from shapely.geometry import Polygon

# Day 15 - New Hope Bridge Search Area coordinates
day_15_coords = [
    [40.43667047680688, -74.78541828511084],
    [40.43335508327552, -74.78299710693108],
    [40.42999253486232, -74.78069066107366],
    [40.42658513609001, -74.77850052826138],
    [40.4231352222195, -74.77642820950186],
    [40.41964515764942, -74.77447512505886],
    [40.416117334295706, -74.7726426134789],
    [40.41255416995226, -74.77093193067388],
    [40.40895810663394, -74.76934424906034],
    [40.40533160890292, -74.76788065675596],
    [40.40167716217959, -74.76654215683381],
    [40.3979972710392, -74.76532966663486],
    [40.39429445749531, -74.76424401713932],
    [40.39057125927138, -74.76328595239713],
    [40.38683022806149, -74.76245612901802],
    [40.38307392778155, -74.76175511572147],
    [40.379304932812154, -74.76118339294699],
    [40.37552582623419, -74.7607413525248],
    [40.37173919805852, -74.76042929740733],
    [40.36794764345096, -74.76024744146156],
    [40.36415376095365, -74.76019590932249],
    [40.363557902384116, -74.47488377330622],
    [40.3730426086274, -74.4750126036539],
    [40.3825214951463, -74.47546724351831],
    [40.391988065585466, -74.47624738131199],
    [40.401435832030394, -74.47735248236746],
    [40.41085831945389, -74.47878178930367],
    [40.42024907015372, -74.48053432254504],
    [40.42960164817846, -74.48260888099281],
    [40.43890964373829, -74.48500404284827],
    [40.448166677598, -74.48771816658713],
    [40.45736640544898, -74.49074939208452],
    [40.466502522257294, -74.49409564188991],
    [40.47556876658485, -74.49775462265085],
    [40.48455892488065, -74.50172382668468],
    [40.49346683573926, -74.50600053369723],
    [40.50228639412355, -74.51058181264713],
    [40.51101155554874, -74.51546452375463],
    [40.519636340225034, -74.52064532065344],
    [40.52815483715581, -74.52612065268416],
    [40.5365612081888, -74.53188676732769],
    [40.5448496920172, -74.5379397127771],
    [40.43667047680688, -74.78541828511084],
]

# Day 18 - Towards High Voltage Lines Search Area coordinates
day_18_coords = [
    [40.49258081626851, -74.57854106978262],
    [40.493056618655906, -74.57776428199409],
    [40.4935246425664, -74.5769793766949],
    [40.4939848078065, -74.57618648837449],
    [40.494437035529266, -74.57538575289023],
    [40.4948812482478, -74.57457730744399],
    [40.49531736984854, -74.57376129055876],
    [40.495745325604304, -74.57293784205483],
    [40.496165042187066, -74.57210710302586],
    [40.49657644768055, -74.57126921581468],
    [40.49697947159256, -74.57042432398899],
    [40.497374044866994, -74.56957257231663],
    [40.49776009989578, -74.56871410674087],
    [40.49813757053036, -74.56784907435537],
    [40.49850639209309, -74.56697762337897],
    [40.49886650138829, -74.56609990313032],
    [40.49921783671309, -74.56521606400226],
    [40.49956033786799, -74.56432625743606],
    [40.499893946167184, -74.56343063589553],
    [40.5002186044486, -74.56252935284077],
    [40.500534257083714, -74.56162256270201],
    [40.5401899498965, -74.58504773472853],
    [40.53963755778505, -74.58663461747135],
    [40.53906940579257, -74.58821186281718],
    [40.53848559126899, -74.58977920051312],
    [40.53788621424791, -74.59133636200396],
    [40.53727137742951, -74.59288308047806],
    [40.5366411861629, -74.5944190909132],
    [40.53599574842813, -74.5959441301219],
    [40.53533517481761, -74.59745793679652],
    [40.53465957851725, -74.5989602515541],
    [40.533969075286976, -74.60045081698073],
    [40.53326378344097, -74.60192937767569],
    [40.53254382382737, -74.60339568029524],
    [40.531809319807536, -74.60484947359595],
    [40.53106039723495, -74.60629050847784],
    [40.53029718443365, -74.60771853802699],
    [40.52951981217622, -74.60913331755789],
    [40.528728413661376, -74.61053460465537],
    [40.5279231244912, -74.61192215921606],
    [40.52710408264784, -74.61329574348967],
    [40.52627142846989, -74.61465512211957],
    [40.49258081626851, -74.57854106978262],
]


def main():
    print("DAY 15 AND DAY 18 OVERLAP AREA - 4 CORNER COORDINATES")
    print("=" * 55)

    # Create Shapely polygons (note: Shapely expects [lon, lat] format)
    day_15_polygon = Polygon([(coord[1], coord[0]) for coord in day_15_coords])
    day_18_polygon = Polygon([(coord[1], coord[0]) for coord in day_18_coords])

    # Calculate intersection
    intersection = day_15_polygon.intersection(day_18_polygon)

    if not intersection.is_empty:
        # Get the bounding box of the intersection
        bounds = (
            intersection.bounds
        )  # (minx, miny, maxx, maxy) = (west, south, east, north)

        print(
            "The overlapping area between Day 15 (New Hope Bridge) and Day 18 (High Voltage Lines)"
        )
        print("can be defined by these 4 corner coordinates:\n")

        print("CORNER COORDINATES (Latitude, Longitude):")
        print(f"1. Southwest Corner: {bounds[1]:.8f}, {bounds[0]:.8f}")
        print(f"2. Southeast Corner: {bounds[1]:.8f}, {bounds[2]:.8f}")
        print(f"3. Northwest Corner: {bounds[3]:.8f}, {bounds[0]:.8f}")
        print(f"4. Northeast Corner: {bounds[3]:.8f}, {bounds[2]:.8f}")

        print("\nCORNER COORDINATES (Decimal Degrees):")
        print(f"1. Southwest: [{bounds[1]:.8f}, {bounds[0]:.8f}]")
        print(f"2. Southeast: [{bounds[1]:.8f}, {bounds[2]:.8f}]")
        print(f"3. Northwest: [{bounds[3]:.8f}, {bounds[0]:.8f}]")
        print(f"4. Northeast: [{bounds[3]:.8f}, {bounds[2]:.8f}]")

        # Calculate area information
        area_sq_deg = intersection.area
        # Rough conversion to square miles (at this latitude, 1 degree ≈ 69 miles)
        area_sq_miles = area_sq_deg * (69 * 69)  # Rough approximation

        print(f"\nArea of overlap: {area_sq_deg:.8f} square degrees")
        print(f"Approximate area: {area_sq_miles:.2f} square miles")

        # Width and height of the bounding box
        width_deg = bounds[2] - bounds[0]  # East - West
        height_deg = bounds[3] - bounds[1]  # North - South
        width_miles = width_deg * 69 * 0.78  # Adjust for latitude (cos 40°)
        height_miles = height_deg * 69

        print(f"\nBounding box dimensions:")
        print(f"Width: {width_deg:.6f}° ({width_miles:.2f} miles)")
        print(f"Height: {height_deg:.6f}° ({height_miles:.2f} miles)")

    else:
        print("ERROR: No intersection found between Day 15 and Day 18 areas!")


if __name__ == "__main__":
    main()
